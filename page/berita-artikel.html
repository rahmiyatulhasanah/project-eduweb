<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Berita dan Artikel</title>
    <link rel="stylesheet" type="text/css" href="../style.css" />
    <link rel="icon" type="image/x-icon" href="/img/E.svg" />

    <style>
      .grid-col-2 > div {
        grid-column: span 2; /* Span across two columns */
        /* display: flex; */
        /* justify-content: center; */
        gap: 10px;
      }
    </style>
  </head>

  <body style="background-color: #8672ff">
    <header></header>

    <main>
      <!-- Berita dan Artikel -->
      <section id="article-container" class="grid-col-2">
        <div style="padding: 0px 20px">
          <button id="show-all">Semua</button>
          <button id="show-article">Artikel</button>
          <button id="show-news">Berita</button>
        </div>
      </section>
    </main>

    <!-- footer -->
    <footer></footer>

    <script src="/js/header_footer.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const articleContainer = document.getElementById("article-container");

        fetch("../page/articles.json")
          .then((res) => res.json())
          .then((articles) => {
            function articleHTML(article) {
              return `
          <article data-label="${article.label}">
            <p
              style="
                border-radius: 10px;
                padding: 5px 15px;
                margin: 10px 0px;
                width: 25%;
                border: 1px solid #8672ff;
                color: #8672ff;
                font-size: 12px;
                font-style: italic;
              "
            >
            ${article.label}
            </p>
            <img src="${article.img}" alt="${article.alt}" class="pict" />
            <h2>${article.title}</h2>
            <p>${article.content}</p>
            <button class="button-article">Baca Selengkapnya</button></br>
          </article>
        `;
            }

            function displayArticles(filterLabel) {
              // Clear the container and re-add the buttons
              articleContainer.innerHTML = `
          <div>
            <button id="show-all">Semua</button>
            <button id="show-articles">Artikel</button>
            <button id="show-news">Berita</button>
          </div>
        `;

              articles.forEach((article) => {
                // If no filter is applied, or the article matches the filter, display it
                if (!filterLabel || article.label === filterLabel) {
                  articleContainer.innerHTML += articleHTML(article);
                }
              });

              // Reattach event listeners after content is re-rendered
              addEventListeners();
            }

            function addEventListeners() {
              document
                .getElementById("show-all")
                .addEventListener("click", () => displayArticles());
              document
                .getElementById("show-articles")
                .addEventListener("click", () => displayArticles("Artikel"));
              document
                .getElementById("show-news")
                .addEventListener("click", () => displayArticles("Berita"));
            }

            // Display all articles by default
            displayArticles();
          })
          .catch((error) => console.error("Error fetching articles:", error));
      });
    </script>
    <!-- <script>
      const articleContainer = document.getElementById("article-container");

      fetch("../page/articles.json")
        .then((res) => res.json())
        .then((article) => {
          function articleHTML(article) {
            return `
              <article>
                <img src="${article.img}" alt="${article.alt}" class="pict" />
                <h2>${article.title}</h2>
                <p>${article.content}</p>
                <button class="button-article">Baca Selengkapnya</button>
              </article>
            `;
          }

          article.forEach((article) => {
            articleContainer.innerHTML += articleHTML(article);
          });
        });
      // .catch(error => console.error('Error fetching the articles:', error));
    </script> -->
  </body>
</html>
